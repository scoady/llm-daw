apiVersion: v1
kind: Secret
metadata:
  name: api-secret
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "llm-daw.labels" . | nindent 4 }}
    app: api
type: Opaque
stringData:
  PORT: "{{ .Values.api.port }}"
  CORS_ORIGIN: "http://frontend.{{ .Release.Namespace }}.svc.cluster.local"
  DATABASE_URL: "postgresql://{{ .Values.postgres.credentials.user }}:{{ .Values.postgres.credentials.password }}@postgres:5432/{{ .Values.postgres.credentials.database }}"
  # ANTHROPIC_API_KEY should be set via --set or a separate secrets file:
  #   helm upgrade ... --set api.anthropicApiKey=sk-ant-...
  {{- if .Values.api.anthropicApiKey }}
  ANTHROPIC_API_KEY: "{{ .Values.api.anthropicApiKey }}"
  {{- end }}
